var socket;socket=io.connect();
$(document).ready(function(){$("#formCadastroUsuario #txtNome").on("input",function(a){validaBarraUsuario()});$("#formCadastroUsuario").submit(function(a){var b=$('#formCadastroUsuario [name\x3d"nome"]').val(),d=$('#formCadastroUsuario [name\x3d"nomeCompleto"]').val(),c=$('#formCadastroUsuario [name\x3d"senha"]').val();validaBarraUsuario()&&socket.emit("cadastroUsuario",{nome:b,nomeCompleto:d,senha:c});a.preventDefault()});$("#formPesquisaUsuario").submit(function(a){$("#formPesquisaUsuario").attr("action","/u/procurar/"+
$("#pesquisaUsuario").val());validaPesquisa($("#pesquisaUsuario").val())||a.preventDefault()});$("#formPesquisaUsuarioNav").submit(function(a){$("#formPesquisaUsuarioNav").attr("action","/u/procurar/"+$("#pesquisaUsuarioNav").val());validaPesquisa($("#pesquisaUsuarioNav").val())||a.preventDefault()});$("#submitFormPesquisaUsuarioNav").click(function(){$("#formPesquisaUsuarioNav").submit()});$("#btnUploadFoto").click(function(){$("#fileFotoPostar").click()});$("#fileFotoPostar").change(function(a){$("#fotoPreview").attr("src",
URL.createObjectURL(a.target.files[0]));"block"!==$("#modalPostar").css("display")&&$("#btnModalPostar").click()});$("#fotoPreview").click(function(){$("#fileFotoPostar").click()});$("#modalPostar").on("shown.bs.modal",function(){$("#descricaoPost").focus()});$("#formPost").submit(function(a){$("#btnPostar").prop("disabled",!0);var b=new FormData;$.each($("#fileFotoPostar")[0].files,function(a,c){b.append("fileFoto-"+a,c)});b.append("descricao",$('#formPost [name\x3d"descricao"]').val());$.ajax({url:"/p/novo",
data:b,cache:!1,contentType:!1,processData:!1,method:"POST",type:"POST",success:function(a){$("#btnCloseModalPostar").click();$("#btnModalAvisoPostado").click();setTimeout(function(){$("#btnPostar").prop("disabled",!1)},2E3);setTimeout(function(){$("#btnCloseModalAvisoPostado").click()},1E3)}});a.preventDefault()});$("#btnAlterarFotoPerfil").click(function(){$("#fileFotoPerfil").click()});$("#fileFotoPerfil").change(function(a){$("#fotoPreviewFotoPerfil").attr("src",URL.createObjectURL(a.target.files[0]));
"block"!==$("#modalFotoPerfil").css("display")&&$("#btnAlterarFotoPerfil").click()});$("#fotoPreviewFotoPerfil").click(function(){$("#fileFotoPerfil").click()});$("#formFotoPerfil").submit(function(a){$("#btnSalvarFotoPerfil").prop("disabled",!0);var b=new FormData;$.each($("#fileFotoPerfil")[0].files,function(a,c){b.append("fileFoto-"+a,c)});$.ajax({url:"/u/alteraFoto",data:b,cache:!1,contentType:!1,processData:!1,method:"POST",type:"POST",success:function(a){$("#fotoPerfil").attr("src","/img/post/"+
a.imagemPerfil);$("#btnCloseModalFotoPerfil").click();setTimeout(function(){$("#btnSalvarFotoPerfil").prop("disabled",!1)},2E3)}});a.preventDefault()});$.each($("#dropdown-notificacoes .aNotificacao"),function(a,b){$(b).click(function(a){$(location).attr("href",$(b).attr("href-notificacao"))})});$.each($('[id^\x3d"formComentar"]'),function(a,b){$(b).submit(function(a){var c=$(b).attr("post-target");comentarPost(c,$("#msgComentar"+c).val());$("#msgComentar"+c).val("");a.preventDefault()})})});
function seguir(a){socket.emit("seguir",a)}socket.on("retornoSeguir",function(a){$("#btnSeguir").html("Seguir");1==a&&$("#btnSeguir").html("Seguindo")});function curtir(a){socket.emit("curtirPost",a)}socket.on("retornoCurtir",function(a){$("#qCurtiu"+a.idPost).html(a.qCurtiu);$("#btnLike"+a.idPost).css("color","black");1==a.isCurte&&$("#btnLike"+a.idPost).css("color","red")});function comentarPost(a,b){socket.emit("comentarPost",{id:a,msg:b})}
socket.on("retornoComentarPost",function(a){$("#comentarios"+a.idPost).append('\n\t\t\t\x3cdiv class\x3d"col-xs-12"\x3e\n\t\t\t\t'+a.comentario.dono.nome+": "+a.comentario.descricao+"\n\t\t\t\x3c/div\x3e")});socket.on("erroCadastrarUsuario",function(a){$("#msgValUsuario").html(a)});socket.on("retornoCadastroUsuario",function(a){console.log("skeeeeeeet");location.href="/"});function validaPesquisa(a){return""!==a.trim()}
function validaBarraUsuario(){$("#msgValUsuario").html("");var a=/^[a-zA-Z0-9_.-]*$/.test($("#formCadastroUsuario #txtNome").val());a||$("#msgValUsuario").html("Os nomes de usu\u00e1rio s\u00f3 podem usar letras, n\u00fameros, sublinhados e pontos.");return a};